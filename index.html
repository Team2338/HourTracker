<!doctype html>
<html>
	
	<head>
		<title>Check In</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<!--<script type = "module" src="js/index.js"></script>-->
		
		<link rel="stylesheet" type="text/css" href="css/index.css">

	</head>

	<div id ="top">
		<body>
			Scan the barcode on your Student ID<br>
			add link here
			... <i>hopefully</i> 
		</body>
	</div>

	<div id = "middle">
		
		<video id="videoStream"></video>

		<label id = "result">
			<em>Nothing Yet!!!</em>
		</label>
	</div>

	<script type="text/javascript" src="https://unpkg.com/@zxing/library@0.18.2/umd/index.js"></script>



	<script type="text/javascript">
		window.addEventListener('load', function(){
			const codeReader = new ZXing.BrowserBarcodeReader();

			let deviceId;
	
			codeReader
				.listVideoInputDevices()
				.then((videoInputDevices) => {
					deviceId = videoInputDevices[0].deviceId;
					if (videoInputDevices.length > 1) {
						videoInputDevices.forEach((element) => {
							deviceId = [1].deviceId;
							console.log(element.label);
							console.log(element.deviceId);
						})
					}
				})
				.catch(err => {
					console.log("err");
					console.error(err);
	
				});
			
				codeReader
					.decodeOnceFromVideoDevice(deviceId, 'videoStream')
					.then(result => {
						console.log(result.text)
						document.getElementById('result').innerHTML = result.text;
					})
					.catch(err => console.error(err));
			

		});

	</script>

</html>
